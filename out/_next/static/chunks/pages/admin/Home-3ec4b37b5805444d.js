(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1717],{4746:function(e,n,t){"use strict";t.d(n,{P:function(){return d}});var s=t(894),r=t(5993),i=t(4592),a=t(7294);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}var l=["children","isDisabled","__css"],o=function(e){return a.createElement(s.JO,c({focusable:"false","aria-hidden":!0},e),a.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},d=(0,r.Gp)((function(e,n){var t=(0,r.mq)("CloseButton",e),s=(0,r.Lr)(e),i=s.children,d=s.isDisabled,u=s.__css,h=function(e,n){if(null==e)return{};var t,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)t=i[s],n.indexOf(t)>=0||(r[t]=e[t]);return r}(s,l);return a.createElement(r.m$.button,c({type:"button","aria-label":"Close",ref:n,disabled:d,__css:c({},{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},t,u)},h),i||a.createElement(o,{width:"1em",height:"1em"}))}));i.Ts&&(d.displayName="CloseButton")},2972:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/Home",function(){return t(3146)}])},3146:function(e,n,t){"use strict";t.r(n);var s=t(5893),r=t(8790),i=t(9839),a=t(5279),c=t(210);n.default=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.xu,{padding:0,children:(0,s.jsx)(i.mQ,{isLazy:!0,variant:"soft-rounded",display:{base:"none",sm:"block",md:"block"},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.OK,{children:(0,s.jsx)(r.X6,{fontSize:"md",children:"Home Chat Queue"})}),(0,s.jsx)(i.OK,{children:(0,s.jsx)(r.X6,{fontSize:"md",children:"Sales Chat Queue"})})]}),(0,s.jsxs)(i.nP,{children:[(0,s.jsx)(i.x4,{children:(0,s.jsx)(a.default,{})}),(0,s.jsx)(i.x4,{children:(0,s.jsx)(c.default,{})})]})]})})}),(0,s.jsx)(r.xu,{display:{base:"block",sm:"none",md:"none "},id:"ParentElem"})]})}},210:function(e,n,t){"use strict";t.r(n);var s=t(8520),r=t.n(s),i=t(5893),a=t(9042),c=t(5193),l=t(4090),o=t(8790),d=t(7294),u=t(6257),h=t(7388),x=t(1163),f=t(8754),m=t(9669),p=t.n(m);function j(e,n,t,s,r,i,a){try{var c=e[i](a),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(s,r)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(s,r){var i=e.apply(n,t);function a(e){j(i,s,r,a,c,"next",e)}function c(e){j(i,s,r,a,c,"throw",e)}a(void 0)}))}}n.default=function(){var e=(0,d.useState)([]),n=e[0],t=e[1],s=(0,d.useState)(!1),m=s[0],j=s[1],b=(0,x.useRouter)();function v(e,n){return _.apply(this,arguments)}function _(){return(_=g(r().mark((function e(n,t){var s,i,a,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=localStorage.getItem("userEmail"),e.prev=1,e.next=4,(0,u.pl)((0,u.JU)(h.db,"sales_chat",t),{sales:s});case 4:return e.sent,i=n+"_"+s+"_"+t,e.next=8,(0,u.pl)((0,u.JU)(h.db,"chat",i),{conversation:[{msg:"Hi!! Please let us know how I can assist you today?",time:Date.now(),type:"TEXT",user:s}]});case 8:return e.sent,a=localStorage.getItem("userToken"),c={headers:{Authorization:"Bearer ".concat(a)}},e.next=13,p().post(f.JW+"/assignment/update",{_id:t,assignedSales:s},c);case 13:e.sent,b.replace("/admin/assignment_details/".concat(t)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,d.useEffect)((function(){if(!m){var e=(0,u.IO)((0,u.hJ)(h.db,"sales_chat"),(0,u.Xo)("time","desc"),(0,u.ar)("time",">=",Date.now()-18e5));(0,u.cf)(e,(function(e){var n=[];e.forEach((function(e){n.push(e)})),t(n)}));j(!0)}}),[m,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.iA,{variant:"simple",size:"md",display:{base:"none",sm:"block",md:"block"},children:[(0,i.jsx)(a.hr,{bgColor:"gray.200",children:(0,i.jsxs)(a.Tr,{children:[(0,i.jsx)(a.Th,{children:"ID"}),(0,i.jsx)(a.Th,{children:"Assigned Sales"}),(0,i.jsx)(a.Th,{})]})}),(0,i.jsx)(a.p3,{children:0===n.length?(0,i.jsx)(i.Fragment,{}):n.map((function(e,n){return(0,i.jsxs)(a.Tr,{visibility:""===e.data().sales?"visible":"collapse",children:[(0,i.jsx)(a.Td,{fontWeight:"semibold",children:"Super Admin"===localStorage.getItem("userRole")?e.id:e.id.substring(0,2)+"****@****.com"}),(0,i.jsx)(a.Td,{children:e.data().sales}),(0,i.jsx)(a.Td,{children:(0,i.jsx)(c.zx,{onClick:g(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(e.id,e.data().assignment);case 2:case"end":return n.stop()}}),n)}))),children:"Resolve"})})]},e.id)}))})]}),(0,i.jsx)("div",{className:"ShowSideClick",children:0===n.length?(0,i.jsx)(i.Fragment,{}):n.map((function(e,n){return(0,i.jsx)(l.UQ,{defaultIndex:[0],allowMultiple:!0,display:{base:"block",sm:"none",md:"none"},children:(0,i.jsxs)(l.Qd,{children:[(0,i.jsx)("h2",{children:(0,i.jsxs)(l.KF,{children:[(0,i.jsx)(o.xu,{flex:"1",textAlign:"left",children:"Sales Chat Queue"}),(0,i.jsx)(l.XE,{})]})}),(0,i.jsx)(l.Hk,{pb:4,children:(0,i.jsx)(a.xJ,{children:(0,i.jsx)(a.iA,{children:(0,i.jsx)(a.p3,{children:(0,i.jsxs)(a.Tr,{visibility:""===e.data().sales?"visible":"collapse",children:[(0,i.jsxs)(a.iA,{children:[(0,i.jsxs)(a.Tr,{children:[(0,i.jsx)(a.Th,{children:"ID"}),(0,i.jsx)(a.Td,{fontWeight:"semibold",children:"Super Admin"===localStorage.getItem("userRole")?e.id:e.id.substring(0,2)+"****@****.com"})]}),(0,i.jsxs)(a.Tr,{children:[(0,i.jsx)(a.Th,{children:"Assigned Sales"}),(0,i.jsx)(a.Td,{children:e.data().sales})]})]}),(0,i.jsx)(a.Td,{children:(0,i.jsx)(c.zx,{onClick:g(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(e.id,e.data().assignment);case 2:case"end":return n.stop()}}),n)}))),children:"Resolve"})})]},e.id)})})})})]})})}))})]})}},7388:function(e,n,t){"use strict";t.d(n,{db:function(){return a}});t(8520);var s=t(5503),r=t(6257);var i=(0,s.ZF)({apiKey:"AIzaSyDni_CDXk80T4e4DbmAdxPejk6K8gl1_BE",authDomain:"assignment-santa.firebaseapp.com",projectId:"assignment-santa",storageBucket:"assignment-santa.appspot.com",messagingSenderId:"697591868119",appId:"1:697591868119:web:ab0da28fc783e036ab1e92"}),a=(0,r.ad)(i)},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[2016,9669,8527,7496,1716,4612,5738,9002,9839,3181,5279,9774,2888,179],(function(){return n=2972,e(e.s=n);var n}));var n=e.O();_N_E=n}]);