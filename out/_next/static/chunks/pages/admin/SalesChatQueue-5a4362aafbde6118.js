(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7520],{5193:function(e,n,t){"use strict";t.d(n,{zx:function(){return S},hU:function(){return E}});var a=t(7375),r=t(5993),i=t(4592),s=t(8554),l=t.n(s),c=t(7294),o=t(6450),d=t(9609);function u(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var m=["size","colorScheme","variant","className","spacing","isAttached","isDisabled"],h=(0,o.kr)({strict:!1,name:"ButtonGroupContext"}),f=h[0],v=h[1],g=(0,r.Gp)((function(e,n){var t=e.size,a=e.colorScheme,s=e.variant,l=e.className,o=e.spacing,d=void 0===o?"0.5rem":o,h=e.isAttached,v=e.isDisabled,g=u(e,m),x=(0,i.cx)("chakra-button__group",l),b=c.useMemo((function(){return{size:t,colorScheme:a,variant:s,isDisabled:v}}),[t,a,s,v]),y={display:"inline-flex"};return y=p({},y,h?{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}}:{"& > *:not(style) ~ *:not(style)":{marginStart:d}}),c.createElement(f,{value:b},c.createElement(r.m$.div,p({ref:n,role:"group",__css:y,className:x},g)))}));i.Ts&&(g.displayName="ButtonGroup");var x=["label","placement","spacing","children","className","__css"],b=function(e){var n=e.label,t=e.placement,a=e.spacing,s=void 0===a?"0.5rem":a,l=e.children,o=void 0===l?c.createElement(d.$,{color:"currentColor",width:"1em",height:"1em"}):l,m=e.className,h=e.__css,f=u(e,x),v=(0,i.cx)("chakra-button__spinner",m),g="start"===t?"marginEnd":"marginStart",b=c.useMemo((function(){var e;return p(((e={display:"flex",alignItems:"center",position:n?"relative":"absolute"})[g]=n?s:0,e.fontSize="1em",e.lineHeight="normal",e),h)}),[h,n,g,s]);return c.createElement(r.m$.div,p({className:v},f,{__css:b}),o)};i.Ts&&(b.displayName="ButtonSpinner");var y=["children","className"],j=function(e){var n=e.children,t=e.className,a=u(e,y),s=c.isValidElement(n)?c.cloneElement(n,{"aria-hidden":!0,focusable:!1}):n,l=(0,i.cx)("chakra-button__icon",t);return c.createElement(r.m$.span,p({display:"inline-flex",alignSelf:"center",flexShrink:0},a,{className:l}),s)};i.Ts&&(j.displayName="ButtonIcon");var _=["isDisabled","isLoading","isActive","isFullWidth","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],S=(0,r.Gp)((function(e,n){var t=v(),s=(0,r.mq)("Button",p({},t,e)),o=(0,r.Lr)(e),d=o.isDisabled,m=void 0===d?null==t?void 0:t.isDisabled:d,h=o.isLoading,f=o.isActive,g=o.isFullWidth,x=o.children,y=o.leftIcon,j=o.rightIcon,S=o.loadingText,k=o.iconSpacing,E=void 0===k?"0.5rem":k,N=o.type,w=o.spinner,I=o.spinnerPlacement,C=void 0===I?"start":I,A=o.className,B=o.as,D=u(o,_),O=c.useMemo((function(){var e,n=l()({},null!=(e=null==s?void 0:s._focus)?e:{},{zIndex:1});return p({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",width:g?"100%":"auto"},s,!!t&&{_focus:n})}),[s,t,g]),P=function(e){var n=c.useState(!e),t=n[0],a=n[1];return{ref:c.useCallback((function(e){e&&a("BUTTON"===e.tagName)}),[]),type:t?"button":void 0}}(B),R=P.ref,z=P.type,$={rightIcon:j,leftIcon:y,iconSpacing:E,children:x};return c.createElement(r.m$.button,p({disabled:m||h,ref:(0,a.qq)(n,R),as:B,type:null!=N?N:z,"data-active":(0,i.PB)(f),"data-loading":(0,i.PB)(h),__css:O,className:(0,i.cx)("chakra-button",A)},D),h&&"start"===C&&c.createElement(b,{className:"chakra-button__spinner--start",label:S,placement:"start",spacing:E},w),h?S||c.createElement(r.m$.span,{opacity:0},c.createElement(T,$)):c.createElement(T,$),h&&"end"===C&&c.createElement(b,{className:"chakra-button__spinner--end",label:S,placement:"end",spacing:E},w))}));function T(e){var n=e.leftIcon,t=e.rightIcon,a=e.children,r=e.iconSpacing;return c.createElement(c.Fragment,null,n&&c.createElement(j,{marginEnd:r},n),a,t&&c.createElement(j,{marginStart:r},t))}i.Ts&&(S.displayName="Button");var k=["icon","children","isRound","aria-label"],E=(0,r.Gp)((function(e,n){var t=e.icon,a=e.children,r=e.isRound,i=e["aria-label"],s=u(e,k),l=t||a,o=c.isValidElement(l)?c.cloneElement(l,{"aria-hidden":!0,focusable:!1}):null;return c.createElement(S,p({padding:"0",borderRadius:r?"full":void 0,ref:n,"aria-label":i},s),o)}));i.Ts&&(E.displayName="IconButton")},9609:function(e,n,t){"use strict";t.d(n,{$:function(){return u}});var a=t(917),r=t(5993),i=t(4592),s=t(1358),l=t(7294);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var o=["label","thickness","speed","emptyColor","className"],d=(0,a.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),u=(0,r.Gp)((function(e,n){var t=(0,r.mq)("Spinner",e),a=(0,r.Lr)(e),u=a.label,p=void 0===u?"Loading...":u,m=a.thickness,h=void 0===m?"2px":m,f=a.speed,v=void 0===f?"0.45s":f,g=a.emptyColor,x=void 0===g?"transparent":g,b=a.className,y=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(a,o),j=(0,i.cx)("chakra-spinner",b),_=c({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:h,borderBottomColor:x,borderLeftColor:x,animation:d+" "+v+" linear infinite"},t);return l.createElement(r.m$.div,c({ref:n,__css:_,className:j},y),p&&l.createElement(s.TX,null,p))}));i.Ts&&(u.displayName="Spinner")},1358:function(e,n,t){"use strict";t.d(n,{TX:function(){return s},NL:function(){return i}});var a=t(5993),r=t(4592),i={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},s=(0,a.m$)("span",{baseStyle:i});r.Ts&&(s.displayName="VisuallyHidden");var l=(0,a.m$)("input",{baseStyle:i});r.Ts&&(l.displayName="VisuallyHiddenInput")},8980:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/SalesChatQueue",function(){return t(210)}])},210:function(e,n,t){"use strict";t.r(n);var a=t(8520),r=t.n(a),i=t(5893),s=t(9042),l=t(5193),c=t(4090),o=t(8790),d=t(7294),u=t(6257),p=t(7388),m=t(1163),h=t(8754),f=t(9669),v=t.n(f);function g(e,n,t,a,r,i,s){try{var l=e[i](s),c=l.value}catch(o){return void t(o)}l.done?n(c):Promise.resolve(c).then(a,r)}function x(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var i=e.apply(n,t);function s(e){g(i,a,r,s,l,"next",e)}function l(e){g(i,a,r,s,l,"throw",e)}s(void 0)}))}}n.default=function(){var e=(0,d.useState)([]),n=e[0],t=e[1],a=(0,d.useState)(!1),f=a[0],g=a[1],b=(0,m.useRouter)();function y(e,n){return j.apply(this,arguments)}function j(){return(j=x(r().mark((function e(n,t){var a,i,s,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("userEmail"),e.prev=1,e.next=4,(0,u.pl)((0,u.JU)(p.db,"sales_chat",t),{sales:a});case 4:return e.sent,i=n+"_"+a+"_"+t,e.next=8,(0,u.pl)((0,u.JU)(p.db,"chat",i),{conversation:[{msg:"Hi!! Please let us know how I can assist you today?",time:Date.now(),type:"TEXT",user:a}]});case 8:return e.sent,s=localStorage.getItem("userToken"),l={headers:{Authorization:"Bearer ".concat(s)}},e.next=13,v().post(h.JW+"/assignment/update",{_id:t,assignedSales:a},l);case 13:e.sent,b.replace("/admin/assignment_details/".concat(t)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,d.useEffect)((function(){if(!f){var e=(0,u.IO)((0,u.hJ)(p.db,"sales_chat"),(0,u.Xo)("time","desc"),(0,u.ar)("time",">=",Date.now()-18e5));(0,u.cf)(e,(function(e){var n=[];e.forEach((function(e){n.push(e)})),t(n)}));g(!0)}}),[f,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.iA,{variant:"simple",size:"md",display:{base:"none",sm:"block",md:"block"},children:[(0,i.jsx)(s.hr,{bgColor:"gray.200",children:(0,i.jsxs)(s.Tr,{children:[(0,i.jsx)(s.Th,{children:"ID"}),(0,i.jsx)(s.Th,{children:"Assigned Sales"}),(0,i.jsx)(s.Th,{})]})}),(0,i.jsx)(s.p3,{children:0===n.length?(0,i.jsx)(i.Fragment,{}):n.map((function(e,n){return(0,i.jsxs)(s.Tr,{visibility:""===e.data().sales?"visible":"collapse",children:[(0,i.jsx)(s.Td,{fontWeight:"semibold",children:"Super Admin"===localStorage.getItem("userRole")?e.id:e.id.substring(0,2)+"****@****.com"}),(0,i.jsx)(s.Td,{children:e.data().sales}),(0,i.jsx)(s.Td,{children:(0,i.jsx)(l.zx,{onClick:x(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e.id,e.data().assignment);case 2:case"end":return n.stop()}}),n)}))),children:"Resolve"})})]},e.id)}))})]}),(0,i.jsx)("div",{className:"ShowSideClick",children:0===n.length?(0,i.jsx)(i.Fragment,{}):n.map((function(e,n){return(0,i.jsx)(c.UQ,{defaultIndex:[0],allowMultiple:!0,display:{base:"block",sm:"none",md:"none"},children:(0,i.jsxs)(c.Qd,{children:[(0,i.jsx)("h2",{children:(0,i.jsxs)(c.KF,{children:[(0,i.jsx)(o.xu,{flex:"1",textAlign:"left",children:"Sales Chat Queue"}),(0,i.jsx)(c.XE,{})]})}),(0,i.jsx)(c.Hk,{pb:4,children:(0,i.jsx)(s.xJ,{children:(0,i.jsx)(s.iA,{children:(0,i.jsx)(s.p3,{children:(0,i.jsxs)(s.Tr,{visibility:""===e.data().sales?"visible":"collapse",children:[(0,i.jsxs)(s.iA,{children:[(0,i.jsxs)(s.Tr,{children:[(0,i.jsx)(s.Th,{children:"ID"}),(0,i.jsx)(s.Td,{fontWeight:"semibold",children:"Super Admin"===localStorage.getItem("userRole")?e.id:e.id.substring(0,2)+"****@****.com"})]}),(0,i.jsxs)(s.Tr,{children:[(0,i.jsx)(s.Th,{children:"Assigned Sales"}),(0,i.jsx)(s.Td,{children:e.data().sales})]})]}),(0,i.jsx)(s.Td,{children:(0,i.jsx)(l.zx,{onClick:x(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e.id,e.data().assignment);case 2:case"end":return n.stop()}}),n)}))),children:"Resolve"})})]},e.id)})})})})]})})}))})]})}},7388:function(e,n,t){"use strict";t.d(n,{db:function(){return s}});t(8520);var a=t(5503),r=t(6257);var i=(0,a.ZF)({apiKey:"AIzaSyDni_CDXk80T4e4DbmAdxPejk6K8gl1_BE",authDomain:"assignment-santa.firebaseapp.com",projectId:"assignment-santa",storageBucket:"assignment-santa.appspot.com",messagingSenderId:"697591868119",appId:"1:697591868119:web:ab0da28fc783e036ab1e92"}),s=(0,r.ad)(i)},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[2016,9669,8527,7496,5738,9002,9774,2888,179],(function(){return n=8980,e(e.s=n);var n}));var n=e.O();_N_E=n}]);