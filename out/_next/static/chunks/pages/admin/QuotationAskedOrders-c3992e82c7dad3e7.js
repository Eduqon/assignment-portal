(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1336],{9042:function(e,n,t){"use strict";t.d(n,{iA:function(){return p},Rn:function(){return f},xJ:function(){return m},p3:function(){return g},Td:function(){return _},Th:function(){return j},hr:function(){return x},Tr:function(){return v}});var r=t(5993),s=t(4592),i=t(7294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}var c=["overflow","overflowX","className"],l=["className"],u=["placement"],d=["isNumeric"],h=["isNumeric"],m=(0,r.Gp)((function(e,n){var t,l=e.overflow,u=e.overflowX,d=e.className,h=o(e,c);return i.createElement(r.m$.div,a({ref:n,className:(0,s.cx)("chakra-table__container",d)},h,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=l?l:u)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),p=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Table",e),c=(0,r.Lr)(e),u=c.className,d=o(c,l);return i.createElement(r.Fo,{value:t},i.createElement(r.m$.table,a({role:"table",ref:n,__css:t.table,className:(0,s.cx)("chakra-table",u)},d)))}));s.Ts&&(p.displayName="Table");var f=(0,r.Gp)((function(e,n){var t=e.placement,s=void 0===t?"bottom":t,c=o(e,u),l=(0,r.yK)();return i.createElement(r.m$.caption,a({},c,{ref:n,__css:a({},l.caption,{captionSide:s})}))}));s.Ts&&(f.displayName="TableCaption");var x=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return i.createElement(r.m$.thead,a({},e,{ref:n,__css:t.thead}))})),g=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return i.createElement(r.m$.tbody,a({},e,{ref:n,__css:t.tbody}))})),j=(0,r.Gp)((function(e,n){var t=e.isNumeric,s=o(e,d),c=(0,r.yK)();return i.createElement(r.m$.th,a({},s,{ref:n,__css:c.th,"data-is-numeric":t}))})),v=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return i.createElement(r.m$.tr,a({role:"row"},e,{ref:n,__css:t.tr}))})),_=(0,r.Gp)((function(e,n){var t=e.isNumeric,s=o(e,h),c=(0,r.yK)();return i.createElement(r.m$.td,a({role:"gridcell"},s,{ref:n,__css:c.td,"data-is-numeric":t}))}))},3441:function(e,n,t){"use strict";t.d(n,{g:function(){return l}});var r=t(9762),s=t(5993),i=t(4592),a=t(7294);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var c=["className","rows"],l=(0,s.Gp)((function(e,n){var t=(0,s.mq)("Textarea",e),l=(0,s.Lr)(e),u=l.className,d=l.rows,h=function(e,n){if(null==e)return{};var t,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(l,c),m=(0,r.Yp)(h),p=d?(0,i.CE)(t,["h","minH","height","minHeight"]):t;return a.createElement(s.m$.textarea,o({ref:n,rows:d},m,{className:(0,i.cx)("chakra-textarea",u),__css:p}))}));i.Ts&&(l.displayName="Textarea")},6395:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/QuotationAskedOrders",function(){return t(9543)}])},9543:function(e,n,t){"use strict";t.r(n);var r=t(8520),s=t.n(r),i=t(5893),a=t(9736),o=t(7375),c=t(2028),l=t(9762),u=t(8790),d=t(4612),h=t(3441),m=t(5193),p=t(9042),f=t(9669),x=t.n(f),g=t(7294),j=t(8756),v=t(1163);function _(e,n,t,r,s,i,a){try{var o=e[i](a),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function w(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var i=e.apply(n,t);function a(e){_(i,r,s,a,o,"next",e)}function o(e){_(i,r,s,a,o,"throw",e)}a(void 0)}))}}n.default=function(){var e,n=function(){var n=(0,o.qY)();function t(){return(t=w(s().mark((function t(r){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r,n.onOpen();case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){var t=(0,g.useState)(""),a=t[0],o=t[1],p=(0,g.useState)(""),f=p[0],v=p[1];return(0,i.jsxs)(c.u_,{size:"2xl",onClose:n.onClose,isOpen:n.isOpen,onOpen:n.onOpen,isCentered:!0,children:[(0,i.jsx)(c.ZA,{}),(0,i.jsxs)(c.hz,{children:[(0,i.jsx)(c.xB,{id:"assId",children:void 0!==y[e]?"Expert Quotation: "+y[e].cost:""}),(0,i.jsx)(c.ol,{}),(0,i.jsxs)(c.fe,{children:[(0,i.jsxs)(l.NI,{padding:2,id:"expertDeadline",children:[(0,i.jsx)(l.lX,{fontWeight:"bold",children:"Set Expert Deadline"}),(0,i.jsxs)(u.Ug,{children:[(0,i.jsx)(d.II,{type:"date",id:"date"}),(0,i.jsx)(d.II,{type:"time",id:"time"})]})]}),(0,i.jsxs)(l.NI,{h:"full",padding:2,id:"quote",children:[(0,i.jsx)(l.lX,{fontWeight:"bold",children:"Enter Quotation"}),(0,i.jsxs)(d.BZ,{children:[(0,i.jsx)(d.Ui,{children:(0,i.jsx)(u.xv,{fontWeight:"bold",children:"INR"})}),(0,i.jsx)(d.II,{type:"number",value:a,onChange:function(){var e=document.getElementById("quote");o(e.value)}})]})]}),(0,i.jsxs)(l.NI,{h:"full",padding:2,children:[(0,i.jsx)(l.lX,{fontWeight:"bold",children:"Note From Operator"}),(0,i.jsx)(h.g,{id:"note",value:f,onChange:function(){var e=document.getElementById("note");v(e.value)}})]})]}),(0,i.jsxs)(c.mz,{children:[(0,i.jsx)(u.LZ,{}),(0,i.jsx)(m.zx,{onClick:w(s().mark((function e(){var t,i,o,c,l,u,d,h,m,p,g,v,_,w,y,T;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("userEmail"),i=localStorage.getItem("userName"),null==(o=localStorage.getItem("userToken"))&&I.replace("/admin/login"),c={headers:{Authorization:"Bearer ".concat(o)}},l=document.getElementById("date"),u=document.getElementById("time"),e.next=10,l.value.split("-");case 10:return d=e.sent,h=d[0],m=d[1],p=d[2],e.next=16,u.value.split(":");case 16:if(g=e.sent,v=g[0],_=g[1],w=new Date(h,m-1,p,v,_,0),y=w.toISOString(),void 0===u.value||""===a){e.next=39;break}return e.next=24,x().post(j.JW+"/assignment/update",{_id:r[O].id,expertDeadline:y},c);case 24:return e.sent,e.next=27,x().post(j.JW+"/assignment/comments/operatorToExpert",{assignmentId:r[O].id,notesFromOperator:{_id:t,name:i,comment:f}},c);case 27:return e.sent,e.next=30,x().post(j.JW+"/assignment/quote/generate",{_id:r[O].id,quotation:a,cp1:a/2},c);case 30:if(T=e.sent,!T.data.success){e.next=37;break}return e.next=35,A();case 35:window.alert("Quote Generated"),n.onClose();case 37:e.next=40;break;case 39:window.alert("Fill Up Quote & Set Deadline Time");case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(0),console.log(e.t0);case 45:case"end":return e.stop()}}),e,null,[[0,42]])}))),children:"Send Quote"})]})]})]})}return(0,i.jsxs)(c.u_,{size:"4xl",onClose:C.onClose,isOpen:C.isOpen,onOpen:C.onOpen,isCentered:!0,children:[(0,i.jsx)(a,{}),(0,i.jsx)(c.ZA,{}),(0,i.jsxs)(c.hz,{children:[(0,i.jsx)(c.xB,{children:"Quotations"}),(0,i.jsx)(c.ol,{}),(0,i.jsx)(c.fe,{children:(0,i.jsxs)(p.iA,{variant:"simple",size:"sm",children:[(0,i.jsx)(p.hr,{bgColor:"gray.200",children:(0,i.jsxs)(p.Tr,{children:[(0,i.jsx)(p.Th,{children:"Name"}),(0,i.jsx)(p.Th,{children:"Word Count"}),(0,i.jsx)(p.Th,{children:"Currency"}),(0,i.jsx)(p.Th,{children:"Quotation"}),(0,i.jsx)(p.Th,{children:"Comments"}),(0,i.jsx)(p.Th,{})]})}),(0,i.jsx)(p.p3,{children:0===y.length?(0,i.jsx)(i.Fragment,{}):y.map((function(e,n){return(0,i.jsxs)(p.Tr,{children:[(0,i.jsx)(p.Td,{children:e.name}),(0,i.jsx)(p.Td,{children:e.wordCount}),(0,i.jsx)(p.Td,{children:e.currency}),(0,i.jsx)(p.Td,{children:e.cost}),(0,i.jsx)(p.Td,{maxW:"300px",children:e.comments}),(0,i.jsx)(p.Td,{children:(0,i.jsx)(u.Ug,{children:(0,i.jsx)(m.zx,{onClick:function(){!function(e){t.apply(this,arguments)}(n)},children:"Select Quote"})})})]},e._id)}))})]})})]})]})},t=(0,g.useState)([]),r=t[0],f=t[1],_=(0,g.useState)([]),y=_[0],T=_[1],b=(0,g.useState)(),O=b[0],k=b[1],S=(0,g.useState)(),N=(S[0],S[1],[]),E=[],I=(0,v.useRouter)(),C=(0,o.qY)();function W(e){return z.apply(this,arguments)}function z(){return(z=w(s().mark((function e(n){var t,i,a,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(n),e.prev=1,null==(t=localStorage.getItem("userToken"))&&I.replace("/admin/login"),i={headers:{Authorization:"Bearer ".concat(t)}},e.next=7,x().get(j.JW+"/assignment/quotes/fetch?assignment_id="+r[n].id,i);case 7:return a=e.sent,e.next=10,a.data.result.expertQuotations;case 10:if(o=e.sent,E=[],0!==o.length)for(c=0;c<o.length;c++)E.push({_id:o[c]._id,name:o[c].name,wordCount:o[c].wordCount,cost:o[c].cost,currency:o[c].currency,comments:o[c].comments});else console.log("No Experts Found");T(E),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:C.onOpen();case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function A(){return Q.apply(this,arguments)}function Q(){return(Q=w(s().mark((function e(){var n,t,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==(n=localStorage.getItem("userToken"))&&I.replace("/admin/login"),t={headers:{Authorization:"Bearer ".concat(n)}},e.next=6,x().get(j.JW+"/assignment/fetch?status=Quotation%20Asked",t);case 6:if(r=e.sent,i=r.data.assignmentData,N=[],0!==i.length)for(a=0;a<i.length;a++)N.push({id:i[a]._id,client_id:i[a].client_id,subject:i[a].subject,status:i[a].status,quotation:i[a].quotation,currencyOfQuote:i[a].currencyOfQuote,level:i[a].level,reference:i[a].reference,description:i[a].description,descriptionFile:i[a].descriptionFile,numOfPages:i[a].numOfPages,paid:i[a].paid,deadline:new Date(i[a].deadline).toLocaleTimeString()+", "+new Date(i[a].deadline).toDateString()});else console.log("No CP1 Pending Orders");f(N),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return(0,g.useEffect)((function(){A()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n,{}),(0,i.jsxs)(p.iA,{variant:"simple",size:"md",children:[(0,i.jsx)(p.hr,{bgColor:"gray.200",children:(0,i.jsxs)(p.Tr,{children:[(0,i.jsx)(p.Th,{children:"Id"}),(0,i.jsx)(p.Th,{children:"Student Email"}),(0,i.jsx)(p.Th,{children:"Subject"}),(0,i.jsx)(p.Th,{children:"Deadline"}),(0,i.jsx)(p.Th,{children:(0,i.jsx)(m.zx,{leftIcon:(0,i.jsx)(a.ny,{}),onClick:w(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:case"end":return e.stop()}}),e)}))),children:"Refresh"})})]})}),(0,i.jsx)(p.p3,{children:r.map((function(e,n){return(0,i.jsxs)(p.Tr,{children:[(0,i.jsx)(p.Td,{fontWeight:"semibold",children:(0,i.jsx)(u.rU,{href:"/admin/assignment_details/"+e.id,children:e.id})}),(0,i.jsx)(p.Td,{children:"Super Admin"===localStorage.getItem("userRole")||"Admin"===localStorage.getItem("userRole")?e.client_id:e.client_id.substring(0,2)+"****@****.com"}),(0,i.jsx)(p.Td,{color:"green.600",fontWeight:"semibold",children:e.subject}),(0,i.jsx)(p.Td,{color:"red.600",fontWeight:"semibold",children:e.deadline}),(0,i.jsx)(p.Td,{children:(0,i.jsx)(u.Ug,{children:(0,i.jsx)(m.zx,{display:"Operator"===localStorage.getItem("userRole")||"Super Admin"===localStorage.getItem("userRole")||"Admin"===localStorage.getItem("userRole")?"flex":"none",onClick:w(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(n));case 1:case"end":return e.stop()}}),e)}))),children:"Quotes from Experts"})})})]},e.id)}))})]})]})}}},function(e){e.O(0,[9669,8527,7496,1716,3673,4612,9774,2888,179],(function(){return n=6395,e(e.s=n);var n}));var n=e.O();_N_E=n}]);