(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4722],{5087:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/CP1PendingOrders",function(){return t(3409)}])},3409:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var r=t(8520),i=t.n(r),s=t(5893),o=t(9736),c=t(5193),a=t(9042),d=t(8790),l=t(7375),u=t(2028),h=t(9762),x=t(4612),p=t(4090),f=t(9669),m=t.n(f),j=t(7294),g=t(8756),T=t(1163);function v(e,n,t,r,i,s,o){try{var c=e[s](o),a=c.value}catch(d){return void t(d)}c.done?n(a):Promise.resolve(a).then(r,i)}var b,w=localStorage.getItem("userToken"),k={headers:{Authorization:"Bearer ".concat(w)}},S=(b=i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(n),e.next=3,m().post("".concat(g.JW,"/assignment/update"),n,k).then((function(e){return e.data}),(function(e){return e.response.data})).catch((function(e){}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,r){var i=b.apply(e,n);function s(e){v(i,t,r,s,o,"next",e)}function o(e){v(i,t,r,s,o,"throw",e)}s(void 0)}))});t(8765);function C(e,n,t,r,i,s,o){try{var c=e[s](o),a=c.value}catch(d){return void t(d)}c.done?n(a):Promise.resolve(a).then(r,i)}function P(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function o(e){C(s,r,i,o,c,"next",e)}function c(e){C(s,r,i,o,c,"throw",e)}o(void 0)}))}}var y=function(e){var n=e.incrementCounter,t=e.decrementCounter,r=(0,l.qY)(),f=r.isOpen,v=r.onOpen,b=r.onClose,w=(0,j.useState)([]),k=w[0],C=w[1],y=(0,j.useState)(""),D=y[0],_=y[1],A=(0,j.useState)(""),I=A[0],O=A[1],z=[],W=(0,T.useRouter)();function E(){return N.apply(this,arguments)}function N(){return(N=P(i().mark((function e(){var n,t,r,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==(n=localStorage.getItem("userToken"))&&W.replace("/admin/login"),t={headers:{Authorization:"Bearer ".concat(n)}},e.next=6,m().get(g.JW+"/assignment/fetch?status=CP1%20Pending",t);case 6:if(r=e.sent,s=r.data.assignmentData,z=[],0!==s.length)for(o=0;o<s.length;o++)z.push({id:s[o]._id,client_id:s[o].client_id,subject:s[o].subject,status:s[o].status,quotation:s[o].quotation,currencyOfQuote:s[o].currencyOfQuote,level:s[o].level,reference:s[o].reference,description:s[o].description,descriptionFile:s[o].descriptionFile,numOfPages:s[o].numOfPages,paid:s[o].paid,deadline:new Date(s[o].deadline).toLocaleTimeString()+", "+new Date(s[o].deadline).toDateString(),expertDeadline:new Date(s[o].expertDeadline).toLocaleTimeString()+", "+new Date(s[o].expertDeadline).toDateString()});else console.log("No CP1 Pending Orders");C(z),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}(0,j.useEffect)((function(){E()}),[]);var R=P(i().mark((function e(){var t,r,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("userToken"),!(I.trim().length>0)){e.next=14;break}return r={_id:D,status:"CP1 Done",paid:I},e.next=5,S(JSON.stringify(r));case 5:return s=e.sent,o={headers:{Authorization:"Bearer ".concat(t)}},e.next=9,m().post(g.JW+"/notifications",{assignmentId:D,status:"CP1 Done",read:!1},o);case 9:e.sent,n("CP1 Done"),s.success&&(E(),b()),e.next=15;break;case 14:alert("Please Fill the Amount Paid Field");case 15:case"end":return e.stop()}}),e)})));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.u_,{isOpen:f,onClose:b,children:[(0,s.jsx)(u.ZA,{}),(0,s.jsxs)(u.hz,{children:[(0,s.jsx)(u.xB,{children:"Add To CP1 Done"}),(0,s.jsx)(u.ol,{}),(0,s.jsx)(u.fe,{children:(0,s.jsxs)(h.NI,{children:[(0,s.jsx)(h.lX,{children:"Amount Paid by Client"}),(0,s.jsx)(x.II,{type:"number",value:I,onChange:function(e){O(e.target.value)},placeholder:"Amount Paid By Client"})]})}),(0,s.jsxs)(u.mz,{children:[(0,s.jsx)(c.zx,{colorScheme:"gray",mr:3,onClick:b,children:"Close"}),(0,s.jsx)(c.zx,{colorScheme:"blue",onClick:function(){R()},children:"Submit"})]})]})]}),(0,s.jsxs)(a.iA,{variant:"simple",size:"md",display:{base:"none",sm:"block",md:"block"},children:[(0,s.jsx)(a.hr,{bgColor:"gray.200",children:(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Id"}),(0,s.jsx)(a.Th,{children:"Student Email"}),(0,s.jsx)(a.Th,{children:"Subject"}),(0,s.jsx)(a.Th,{children:"Order Quote"}),(0,s.jsx)(a.Th,{children:"Amount Paid"}),(0,s.jsx)(a.Th,{children:"Expert Deadline "}),(0,s.jsx)(a.Th,{children:"Deadline"}),(0,s.jsx)(a.Th,{children:"Status"}),(0,s.jsx)(a.Th,{children:(0,s.jsx)(c.zx,{leftIcon:(0,s.jsx)(o.ny,{}),onClick:P(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:case"end":return e.stop()}}),e)}))),children:"Refresh"})})]})}),(0,s.jsx)(a.p3,{children:k.map((function(e,n){return(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Td,{fontWeight:"semibold",children:(0,s.jsx)(d.rU,{href:"/admin/assignment_details/"+e.id,children:e.id})}),(0,s.jsx)(a.Td,{children:"Super Admin"===localStorage.getItem("userRole")||"Admin"===localStorage.getItem("userRole")?e.client_id:e.client_id.substring(0,2)+"****@****.com"}),(0,s.jsx)(a.Td,{color:"green.600",fontWeight:"semibold",children:e.subject}),(0,s.jsx)(a.Td,{children:e.quotation}),(0,s.jsx)(a.Td,{children:e.paid}),(0,s.jsx)(a.Td,{color:"red.600",fontWeight:"semibold",children:e.expertDeadline}),(0,s.jsx)(a.Td,{color:"red.600",fontWeight:"semibold",children:e.deadline}),(0,s.jsx)(a.Td,{fontWeight:"semibold",color:"Fresh Order"===e.status?"green":"Doability Asked"===e.status?"orange":"red",children:e.status}),(0,s.jsx)(a.Td,{children:(0,s.jsx)(c.zx,{onClick:function(){v(),_(e.id),t("CP1 Pending")},children:"Add to CP1 Done"})})]},e.id)}))})]}),(0,s.jsx)("div",{className:"ShowSideClick",children:k.map((function(e){return(0,s.jsx)(p.UQ,{defaultIndex:[0],allowMultiple:!0,display:{base:"block",sm:"none",md:"none"},children:(0,s.jsxs)(p.Qd,{children:[(0,s.jsx)("h2",{children:(0,s.jsxs)(p.KF,{children:[(0,s.jsx)(d.xu,{flex:"1",textAlign:"left",children:(0,s.jsx)(a.iA,{children:(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Id"}),(0,s.jsx)(a.Td,{fontWeight:"semibold",children:(0,s.jsx)(d.rU,{href:"/admin/assignment_details/"+e.id,children:e.id})})]})})}),(0,s.jsx)(p.XE,{})]})}),(0,s.jsx)(p.Hk,{pb:0,children:(0,s.jsx)(a.Tr,{children:(0,s.jsxs)(a.iA,{bgColor:"gray.200",variant:"simple",size:"md",children:[(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Student Email"}),(0,s.jsx)(a.Td,{children:"Super Admin"===localStorage.getItem("userRole")||"Admin"===localStorage.getItem("userRole")?e.client_id:e.client_id.substring(0,2)+"****@****.com"})]}),(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Subject"}),(0,s.jsx)(a.Td,{color:"green.600",fontWeight:"semibold",children:e.subject})]}),(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Order Quote"}),(0,s.jsx)(a.Td,{children:e.quotation})]}),(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Amount Paid"}),(0,s.jsx)(a.Td,{children:e.paid})]}),(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Expert Deadline"}),(0,s.jsx)(a.Td,{color:"red.600",fontWeight:"semibold",children:e.expertDeadline})]}),(0,s.jsxs)(a.Tr,{children:[(0,s.jsx)(a.Th,{children:"Deadline"}),(0,s.jsx)(a.Td,{color:"red.600",fontWeight:"semibold",children:e.deadline})]}),(0,s.jsx)(a.Tr,{children:(0,s.jsx)(a.Th,{children:(0,s.jsx)(c.zx,{leftIcon:(0,s.jsx)(o.ny,{}),onClick:P(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:case"end":return e.stop()}}),e)}))),children:"Refresh"})})})]})},e.id)})]})})}))})]})}},8765:function(e,n,t){"use strict";t.r(n);var r=t(8520),i=t.n(r),s=t(5893),o=(t(7294),t(4612)),c=t(9669),a=t.n(c),d=t(8756);function l(e,n,t,r,i,s,o){try{var c=e[s](o),a=c.value}catch(d){return void t(d)}c.done?n(a):Promise.resolve(a).then(r,i)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function o(e){l(s,r,i,o,c,"next",e)}function c(e){l(s,r,i,o,c,"throw",e)}o(void 0)}))}}n.default=function(e){var n=e.showPopup,t=e.setShowPopup,r=e.expertdeadlineDate,c=e.setExpertdeadlineDate,l=e.index,h=e.assignments;function x(){return(x=u(i().mark((function e(){var s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=localStorage.getItem("userToken"),o=r,c={headers:{Authorization:"Bearer ".concat(s)}},e.next=6,a().post(d.JW+"/assignment/update",{_id:h[l].id,expertDeadline:o},c);case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0+"error triggered");case 12:t(!n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,s.jsxs)("div",{className:"popup",style:{width:"250px",height:"170px",backgroundColor:" #f8f9fa",position:" absolute",borderRadius:"13px",left:"56%",top:" 28%",padding:"30px",boxShadow:"0 0 3px"},children:[(0,s.jsx)("div",{className:"showpic",onClick:function(){return t(!n)},style:{height:"19%",width:"11%",marginLeft:" 98%",marginTop:"-9%",cursor:"pointer"},children:(0,s.jsx)("img",{src:"https://img.icons8.com/emoji/48/000000/cross-mark-emoji.png"})}),(0,s.jsx)("label",{style:{fontWeight:"600",marginTop:"0%"},children:"Update Expert Deadline"}),(0,s.jsx)(o.II,{onChange:function(e){return c(e.target.value)},placeholder:"Select Date and Time",size:"md",type:"datetime-local"}),(0,s.jsx)("button",{onClick:function(){return function(){return x.apply(this,arguments)}()},style:{backgroundColor:"blue",height:"26%",width:"35%",borderRadius:"10px",color:"white",marginLeft:"33%",marginTop:"9%"},children:"Save"})]})}}},function(e){e.O(0,[9669,8527,7496,1716,3673,4612,5738,9774,2888,179],(function(){return n=5087,e(e.s=n);var n}));var n=e.O();_N_E=n}]);